//
//  FundWorker.swift
//  DesafioSantander
//
//  Created by Fernanda de Lima on 03/09/2018.
//  Copyright (c) 2018 FeLima. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol FundWorkerDelegate{
    func fundWorker(fundWorker: FundWorker, didFetchFund fund: FundModal)
}

class FundWorker : FundAPIDelegate{
    var fundAPI: FundAPIProtocol = FundAPI()
    var delegate: FundWorkerDelegate?
    
    // MARK: Block implementation
    func fetch(completion: @escaping (FundModal) -> Void)
    {
        fundAPI.fetch { (funds) in
            completion(funds)
        }
    }
    
    // MARK: Delegate implementation
    func fetch(){
        fundAPI.delegate = self
        fundAPI.fetch()
    }
    
    func fundAPI(fundAPI: FundAPIProtocol, didFetchFund fund: FundModal) {
        delegate?.fundWorker(fundWorker: self, didFetchFund: fund)
    }
    
}
